---
title: Setting up WordPress with Composer
updated: 2020-09-10 21:43:38Z
created: 2020-09-10 21:43:38Z
---

# Setting up WordPress with Composer
Putting together a new WordPress site can be frustrating. Download the code, upload to a hosting server, configure the server, configure the code, mess with permissions. Make sure to configure .htaccess because you're giving your server user access to update files. Plus, if you decide to create custom plugins or templates, do you have to commit all of the WordPress codebase into your version control system?
Well, PHP has a code dependency manager called Composer that is similar to what Pip does on Python and npm does for the Node ecosystem. We can now manage our code in a configuration file and don't have to manually upload or update support packages anymore. Composer simplifies the management of a WordPress site, especially if you're a developer.
With the johnpbloch, WordPress becomes another dependency in your project. You no longer have to commit the WordPress codebase into your version control system. All you need is the composer.json file. It also puts the wp-config file outside the public directory.
Now you can update your site by updating the plugins in your composer file. You can also include plugins that are not in the wordpress repository but are available via a version control repository. I'm using an S3 plugin that's not available on the WordPress plugin site by linking to it's git repository with composer and some custom plugins and custom templates that we created internally. All I have to manage is the composer configuration file to maintain my WordPress site.
Image management can be it's own nightmare. Wouldn't it be nice to have an image hosting service that provides a complete delivery network plus lets me alter images just by putting parameters in the URL. Well, look into Cloudinary. It has a very generous free tier that includes about 10GB of storage. Now I can provide responsive images to my site by just tweaking the URL of the images from Cloudinary. It also has an API to upload and find out information about the images in your repository. If you're on a paid plan, they have additional services that include policing your images, tagging them. Plus, not images stored on your server so no need to worry about backing these up.
Other issue I've ran into, especially with a multi-site and using composer, is the need on occasion to completely replace your wordpress codebase. That can be an issue because of the wp-content directory. Look into S3 from human made. It's a plugin that moves your uploads directly to S3. No longer need to worry about the wp-content folder or even making it writeable by your server user. You can completely set all your uploads to be safely stored in S3. Plus, you're saving your local storage space. Your site is maintainable, more secure and can be easily recreated.


# WordPress with Composer, S3 and Cloudinary
I created a couple of sites for the church and the preschool i'm working with. Although I wanted the sites to be static, I also wanted to include a blog. WordPress seemed like a good solution. Because I wanted complete control over the sites including being able to create my own plugins, I'm self-hosted on an Amazon LightSail server for about $5/month. 
Setting up WordPress used to fill me with dread. Because I test the site locally before uploading it, I used to download the complete WordPress code, configure it with my plugins and templates, commit the complete class into my version control so I can deploy it on my server.
Updating WordPress becomes a nightmare because I need to see what changed manually. This means that I'm very reluctant to do upgrades.
Enter Composer. It is the PHP composer dependency manager which allows me to manage even WordPress as a package dependency. Now, my custom code can be separate from the WordPress codebase. With Composer and johnpbloch's WordPress installer, WordPress becomes just another dependency in my Composer.json file.
With Wpack?, all the plugins from the WordPress repository are available as Composer packages. Rather than giving your server user the ability to change files on your server or having to manually upload plugins or templates to your server, all of the plugins can be added in your composer file. Additional plus is that plugins unavailable on the WordPress plugin repository can still be installed with composer and their version control repositories.
There's also the benefit of having a development and a production configuration in the same file. All the plugins and templates in development stay under dev dependencies. Everything ready for development is just under dependencies. Updating the production site requirers running composer update with the --no-dev flag. Only plugins and templates ready for production are now included.
With Composer, I no longer dread working on a WordPress site. I can now use the latest features of PHP in plugins and there's even a sane system for creating custom templates using Timber which uses Twig as their templating system. Building a WordPress site no longer feels like I'm stepping back in time.

